import{r as x,W as O,j as e}from"./app-DZe3A5Eo.js";import{c as q}from"./index-CJckUUon.js";import{S as y}from"./sweetalert2.all-U6Xlt3MP.js";import{d as g}from"./index-D_IJPO7K.js";import{g as D}from"./chunk-XHQUSKIE-Cm8YodC9.js";import{$ as I}from"./useControlledState-CjXxMMAQ.js";import{u as N,c as P}from"./chunk-HUKVTWEI-ClycOMCv.js";import{m as S,a as R,b as $,c as E,d as T}from"./chunk-X4CB5I5S-Dy29aVIG.js";import{s as U,l as w}from"./chunk-OKTOLZE5-BM3pR4xK.js";import{b as j}from"./chunk-NXTXE2B3-H9fbYrcq.js";import{l as V}from"./chunk-77LBB3F4-DUpZ6Bhu.js";import{i as o}from"./chunk-ZH5EUE66-B37RNOwp.js";import{t as k}from"./chunk-WRGKOHGB-BHQY6HPR.js";function A(f={}){const{id:b,defaultOpen:h,isOpen:a,onClose:c,onOpen:v,onChange:s=()=>{}}=f,t=N(v),d=N(c),[l,n]=I(a,h||!1,s),i=x.useId(),_=b||i,r=a!==void 0,m=x.useCallback(()=>{r||n(!1),d==null||d()},[r,d]),u=x.useCallback(()=>{r||n(!0),t==null||t()},[r,t]),C=x.useCallback(()=>{(l?m:u)()},[l,u,m]);return{isOpen:!!l,onOpen:u,onClose:m,onOpenChange:C,isControlled:r,getButtonProps:(p={})=>({...p,"aria-expanded":l,"aria-controls":_,onClick:D(p.onClick,C)}),getDisclosureProps:(p={})=>({...p,hidden:!l,id:_})}}const M=["Gift Card","Coupon","E-Voucher"];function B(){const{isOpen:f,onOpen:b,onClose:h}=A(),{data:a,setData:c,post:v,errors:s}=O({name:"",price:"",description:"",product_type:"",unique_code:"",is_consumable:!1,validity_start_date:"",validity_end_date:"",redemption_instructions:"",image_url:"https://img.icons8.com/parakeet-line/48/image.png"}),t=n=>{const{name:i,value:_,type:r,checked:m}=n.target,u=r==="checkbox"?m:_;c({...a,[i]:u})},d=async n=>{n.preventDefault();try{await v(route("products.store"),a),y.fire({icon:"success",title:"Success!",text:"Product created successfully."}).then(i=>{(i.isConfirmed||i.isDismissed)&&g.Inertia.visit(route("products.index"))}),c({name:"",price:"",description:"",product_type:"",unique_code:"",is_consumable:!1,validity_start_date:"",validity_end_date:"",redemption_instructions:""}),h()}catch{y.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}},l=()=>{const n=Math.random().toString(36).substr(2,10).toUpperCase();c({...a,unique_code:n})};return x.useEffect(()=>{l()},[]),e.jsxs(e.Fragment,{children:[e.jsx(j,{as:V,onPress:b,color:"primary",endContent:e.jsx(q,{}),children:"Add New"}),e.jsx(S,{isOpen:f,onClose:h,placement:"top-center",isDismissable:!1,hideCloseButton:!0,size:"xl",scrollBehavior:"outside",backdrop:"blur",children:e.jsx(R,{children:e.jsxs("form",{onSubmit:d,children:[e.jsx($,{className:"flex flex-col gap-1",children:"Create Product"}),e.jsxs(E,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{autoFocus:!0,type:"text",name:"name",label:"Name",value:a.name,onChange:t,className:"mt-1",placeholder:"Product Name"}),s.name&&e.jsx("div",{className:"text-red-500 mt-1",children:s.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{type:"text",name:"price",label:"Sale Price",value:a.price,onChange:t,className:"mt-1",placeholder:"Product Price"}),s.price&&e.jsx("div",{className:"text-red-500 mt-1",children:s.price})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(k,{name:"description",value:a.description,label:"Description",onChange:t,placeholder:"Product Description"}),s.description&&e.jsx("div",{className:"text-red-500 mt-1",children:s.description})]}),e.jsx("div",{className:"mb-4",children:e.jsx(o,{type:"url",name:"image_url",label:"Image URL",value:a.image_url,onChange:t,className:"mt-1",placeholder:"Product Image URL"})}),e.jsx("div",{className:"mb-4",children:e.jsx(P,{name:"is_vat_exempt",checked:a.is_vat_exempt,onChange:t,children:"Is VAT Exempt"})}),!a.is_vat_exempt&&e.jsx("div",{className:"mb-4",children:e.jsx(o,{type:"number",name:"vat_rate",label:"VAT Rate (%)",value:a.vat_rate||12,onChange:t,className:"mt-1",placeholder:"VAT Rate"})}),e.jsx("div",{className:"mb-4",children:e.jsx(P,{name:"is_consumable",checked:a.is_consumable,onChange:t,children:"Is Consumable"})}),a.is_consumable?e.jsxs("div",{className:"mb-4",children:[e.jsx(U,{name:"product_type",label:"Product Type",value:a.product_type,onChange:t,className:"mt-1",children:M.map(n=>e.jsx(w,{value:n,children:n},n))}),s.product_type&&e.jsx("div",{className:"text-red-500 mt-1",children:s.product_type}),e.jsxs("div",{className:"flex space-x-5 mt-4 mb-4",children:[e.jsxs("p",{className:"mt-1 text-sm",children:["Validity Dates"," "]}),e.jsx(o,{type:"date",name:"validity_start_date",value:a.validity_start_date,onChange:t,className:"mt-1",placeholder:"Start Date"}),e.jsx(o,{type:"date",name:"validity_end_date",value:a.validity_end_date,onChange:t,className:"mt-1",placeholder:"End Date"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{type:"number",name:"quantity",label:"Quantity",value:a.quantity,onChange:t,className:"mt-1",placeholder:"Product Quantity"}),s.quantity&&e.jsx("div",{className:"text-red-500 mt-1",children:s.quantity})]}),e.jsx("div",{className:"mb-4",children:e.jsx(k,{name:"redemption_instructions",value:a.redemption_instructions,label:"Redemption Instructions",onChange:t,placeholder:"Redemption Instructions"})})]}):null,e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{type:"text",name:"unique_code",label:"Unique Code",value:a.unique_code,onChange:t,className:"mt-1",placeholder:"Unique Code",readOnly:!0}),s.unique_code&&e.jsx("div",{className:"text-red-500 mt-1",children:s.unique_code})]})]}),e.jsxs(T,{children:[e.jsx(j,{color:"primary",type:"submit",children:"Create"}),e.jsx(j,{color:"danger",onClick:()=>g.Inertia.visit(route("products.index")),children:"Cancel"})]})]})})})]})}const ae=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));export{B as C,ae as a,A as u};
