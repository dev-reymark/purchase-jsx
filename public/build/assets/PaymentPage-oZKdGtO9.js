import{r as m,j as e,Y as P,b as x}from"./app-DZe3A5Eo.js";import{S as c}from"./sweetalert2.all-U6Xlt3MP.js";import{d as f}from"./index-D_IJPO7K.js";import{A as v}from"./AuthenticatedLayout-BJkFj0yU.js";import{t as C,a as w,b as p,c as _,d as S,e as u}from"./chunk-YRZGWF2W-BTdUnALr.js";import{c as E}from"./chunk-ZBZZ6A2J-BUoSXG5g.js";import{i as l}from"./chunk-ZH5EUE66-B37RNOwp.js";import{b as y}from"./chunk-NXTXE2B3-H9fbYrcq.js";import"./ApplicationLogo-sVjwoLkn.js";import"./chunk-YAC6J4IU-BjIZhijt.js";import"./index-DF1axCFp.js";import"./useMenuTriggerState-CYspXe38.js";import"./useControlledState-CjXxMMAQ.js";import"./chunk-XHQUSKIE-Cm8YodC9.js";import"./VisuallyHidden-oXn3kJb5.js";import"./chunk-6SYPMUJF-DKWkzE0F.js";import"./Combination-DUOysM2-.js";import"./chunk-7F3ZLNJ6-Cd56nhL-.js";import"./chunk-HUKVTWEI-ClycOMCv.js";import"./useToggleState-BDjIqUK2.js";import"./chunk-RFUEKIFS-BiXG_wtu.js";import"./chunk-RXDYTPX4-aYd7C-dW.js";const Z=({auth:b})=>{const[a,h]=m.useState({cardNumber:"",expiry:"",cvc:"",amount:0,status:"pending",reference:"",products:[]}),[o,i]=m.useState(!1);m.useEffect(()=>{const t=new URLSearchParams(window.location.search),r=parseFloat(t.get("total")||"0"),n=t.get("reference")||"",d=t.get("products")||"[]",X=JSON.parse(d);h(N=>({...N,amount:r,reference:n,products:X}))},[]);const j=async t=>{t.preventDefault(),i(!0);try{const n=(await x.post("/payments",a)).data;await c.fire({title:"Success!",text:"Payment successful!",icon:"success",confirmButtonText:"OK"}),f.Inertia.visit(route("purchases.show",{id:n}))}catch(r){c.fire("Error!",r.response.data.message||"Failed to process payment.","error")}finally{i(!1)}},s=t=>{const{name:r,value:n}=t.target;h(d=>({...d,[r]:n}))},g=async()=>{i(!0);try{await x.post("/payments",{...a,cancel:!0}),await c.fire({title:"Payment Cancelled!",text:"Your payment has been cancelled.",icon:"info",confirmButtonText:"OK"}),f.Inertia.visit(route("purchases.index"))}catch(t){c.fire("Error!",t.response.data.message||"Failed to cancel payment.","error")}finally{i(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(v,{user:b,header:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Payment"})}),children:[e.jsx(P,{title:"Payment"}),e.jsx("div",{className:"py-12",children:e.jsxs(E,{className:"max-w-xl mx-auto mt-8 sm:px-6 lg:px-8 p-8",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight mb-4",children:"Payment Confirmation"}),e.jsx("p",{className:"mb-4",children:"Please review your order before proceeding with the payment."}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-2",children:["Products (",a.products.length,")"]}),e.jsxs(C,{"aria-label":"Purchase Order Products",children:[e.jsxs(w,{children:[e.jsx(p,{children:"Products"}),e.jsx(p,{children:"Unit Price"}),e.jsx(p,{children:"Quantity"})]}),e.jsx(_,{emptyContent:"No products associated with this purchase order.",children:a.products.map((t,r)=>e.jsxs(S,{children:[e.jsx(u,{children:t.name}),e.jsxs(u,{children:["₱",t.price]}),e.jsx(u,{children:t.quantity})]},r))})]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx(l,{type:"text",name:"reference",value:a.reference,onChange:s,placeholder:"Reference",label:"Reference",readOnly:!0}),e.jsx(l,{type:"number",name:"amount",value:a.amount,onChange:s,placeholder:"Amount",readOnly:!0,label:"Amount to Pay (₱)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"font-semibold",children:"Credit/Debit Card"}),e.jsx("p",{className:"text-sm",children:"Enter your card details."}),e.jsx(l,{type:"text",name:"cardNumber",value:a.cardNumber,onChange:s,placeholder:"XXXXX-XXXX-XXXX-XXXX",isRequired:!0,label:"Card Number"}),e.jsx(l,{type:"text",name:"expiry",value:a.expiry,onChange:s,placeholder:"MM/YY",isRequired:!0,label:"Expiry Date"}),e.jsx(l,{type:"text",name:"cvc",value:a.cvc,onChange:s,placeholder:"XXX",isRequired:!0,label:"CVC"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{color:"primary",type:"submit",disabled:o,children:o?"Processing...":"Pay"}),e.jsx(y,{color:"danger",type:"button",onClick:g,disabled:o,children:o?"Cancelling...":"Cancel"})]})]})]})})]})})};export{Z as default};
